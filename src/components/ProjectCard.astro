---
import type { Project } from "@/data/projects";

type Props = Project;

const { title, techs, link, isComingSoon } = Astro.props;

const formatTechs = (values: string[]) =>
  values.toString().replaceAll(",", " â€¢ ");
---

<>
  {
    isComingSoon && (
      <div class="relative overflow-hidden rounded-2xl backdrop-blur-2xl backdrop-saturate-150 bg-white/0 border border-white/10 p-8 transition-all duration-300 ease-out transform-gpu shadow-[0_8px_30px_-12px_rgba(0,0,0,0.55),inset_0_1px_0_rgba(255,255,255,0.06)] hover:shadow-[0_16px_40px_-16px_rgba(0,0,0,0.7),inset_0_1px_0_rgba(255,255,255,0.08)] hover:-translate-y-0.5 hover:border-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950">

        <div class="pointer-events-none absolute inset-0 rounded-2xl shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]"></div>
        
        <div class="relative flex h-full flex-col justify-between">
          <div class="space-y-6">
            <div class="flex items-start justify-between">
              <h3 class="text-lg font-bold text-white line-clamp-2 group-hover:text-indigo-100 transition-colors duration-300">
                {title}
              </h3>
            </div>
            
            <p class="text-sm text-gray-300 line-clamp-2">
              {formatTechs(techs)}
            </p>
          </div>

          <div class="mt-8 flex items-center justify-between">
            <span class="inline-flex items-center rounded-full bg-indigo-500/20 px-4 py-2 text-sm font-medium text-indigo-300 border border-indigo-500/30 backdrop-blur-sm">
              Coming Soon
            </span>
          </div>
        </div>
      </div>
    )
  }

  {
    !isComingSoon && (
              <a
          class="relative block h-full overflow-hidden rounded-2xl backdrop-blur-2xl backdrop-saturate-150 bg-white/0 border border-white/10 p-8 transition-all duration-300 ease-out transform-gpu shadow-[0_8px_30px_-12px_rgba(0,0,0,0.55),inset_0_1px_0_rgba(255,255,255,0.06)] hover:shadow-[0_16px_40px_-16px_rgba(0,0,0,0.7),inset_0_1px_0_rgba(255,255,255,0.08)] hover:-translate-y-0.5 hover:border-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400/40 focus-visible:ring-offset-2 focus-visible:ring-offset-slate-950"
          href={link}
          target="_blank"
          rel="noreferrer prefetch"
          aria-label={`Visit project: ${title}`}
        >

        <div class="pointer-events-none absolute inset-0 rounded-2xl shadow-[inset_0_1px_0_rgba(255,255,255,0.05)]"></div>
        
        <div class="relative flex h-full flex-col justify-between">
          <div class="space-y-6">
            <div class="flex items-start justify-between">
              <h3 class="text-lg font-bold text-white line-clamp-2">
                {title}
              </h3>
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                class="mt-1 flex-shrink-0 text-gray-400"
                aria-hidden="true"
              >
                <path
                  d="M7 17L17 7"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                />
                <path
                  d="M7 7H17V17"
                  stroke="currentColor"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                />
              </svg>
            </div>
            
            <p class="text-sm text-gray-300 line-clamp-2">
              {formatTechs(techs)}
            </p>
          </div>
        </div>
      </a>
    )
  }
</>
