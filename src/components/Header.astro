---
import removeTrailingSlash from "@/utils/removeTrailingSlash";
import presentation from "@/data/presentation";
import MobileMenu from "@/components/MobileMenu.astro";

const pathname = removeTrailingSlash(Astro.url.pathname);
const notInHome = pathname !== "/";
const navItems = [
  { href: "/", label: "Home" },
  { href: "/resume", label: "Resume" },
  { href: "/posts", label: "Posts" },
  { href: "/planned", label: "Plans" },
  { href: "/til", label: "TIL" },
];
---

<header class="flex w-full items-center justify-between md:py-4">
  <!-- Logo/Brand -->
  <div class="flex items-center min-w-[200px]">
    {
      notInHome ? (
        <a 
          href="/" 
          class="text-lg font-bold bg-gradient-to-r from-indigo-400 via-purple-400 to-violet-400 bg-clip-text text-transparent hover:from-indigo-300 hover:via-purple-300 hover:to-violet-300 transition-all duration-300 ease-out focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-slate-950 rounded"
          aria-current={pathname === "/" ? "page" : undefined}
        >
          Mahmudul
        </a>
      ) : (
        <a 
          href={`mailto:${presentation.mail}`} 
          class="text-lg font-medium text-gray-300 hover:text-white transition-all duration-300 ease-out relative group focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-slate-950 rounded"
        >
          {presentation.mail}
          <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-indigo-400 to-purple-400 transition-all duration-300 ease-out group-hover:w-full"></span>
        </a>
      )
    }
  </div>

  <!-- Navigation -->
  <nav class="hidden md:block" role="navigation" aria-label="Primary">
    <ul role="list" class="flex items-center space-x-8">
      {navItems.map(({ href, label }) => {
        const isActive = pathname === href;
        return (
          <li>
            <a
              href={href}
              class:list={{
                ["text-white font-medium relative transition-all duration-300 ease-out focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-slate-950 rounded"]: isActive,
                ["text-gray-300 hover:text-white transition-all duration-300 ease-out relative group focus:outline-none focus:ring-2 focus:ring-indigo-400 focus:ring-offset-2 focus:ring-offset-slate-950 rounded"]: !isActive,
              }}
              aria-current={isActive ? "page" : undefined}
            >
              {label}
              <span class:list={{
                ["absolute -bottom-1 left-0 w-full h-0.5 bg-gradient-to-r from-indigo-400 to-purple-400 transition-all duration-300 ease-out"]: isActive,
                ["absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-indigo-400 to-purple-400 transition-all duration-300 ease-out group-hover:w-full"]: !isActive,
              }}></span>

              <span class:list={{
                ["absolute -bottom-1 left-0 w-full h-0.5 bg-gradient-to-r from-indigo-400/20 to-purple-400/20 blur-sm transition-all duration-300 ease-out"]: isActive,
                ["absolute -bottom-1 left-0 w-0 h-0.5 bg-gradient-to-r from-indigo-400/20 to-purple-400/20 blur-sm transition-all duration-300 ease-out group-hover:w-full"]: !isActive,
              }}></span>
            </a>
          </li>
        );
      })}
    </ul>
  </nav>

  <MobileMenu />
</header>
