---
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import SEOTags from '@/components/seo/SEOTags.astro';

import '@fontsource/open-sans';
import '@/styles/tailwind.css';
import '@/styles/post.css';
import ThemeProvider from '@/components/ThemeProvider.astro';

export interface Props {
  title?: string;
  og?: {
    title?: string;
    type?: string;
    description?: string;
    image?: string;
    alt?: string;
  };
  article?: {
    publishedTime?: string;
    modifiedTime?: string;
    author?: string;
    section?: string;
    tags?: string[];
  };
}

const { title, og, article } = Astro.props;
---

<!DOCTYPE html>
<html lang="en">
  <SEOTags title={title} og={og} article={article} />

  <body class="relative min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-indigo-950 text-slate-100 antialiased overflow-x-hidden">
    <!-- Gradient background -->
    <div class="fixed inset-0 bg-gradient-to-br from-slate-950 via-slate-900 to-indigo-950 motion-safe:animate-gradient" aria-hidden="true"></div>
    
    <!-- Floating orbs -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none" aria-hidden="true">
      <div class="absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-indigo-500/8 to-purple-500/8 rounded-full blur-3xl motion-safe:animate-pulse"></div>
      <div class="absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-violet-500/8 to-purple-500/8 rounded-full blur-3xl motion-safe:animate-pulse delay-1000"></div>
      <div class="absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-purple-500/6 to-indigo-500/6 rounded-full blur-3xl motion-safe:animate-pulse delay-500"></div>
    </div>
    
    <!-- Subtle noise texture overlay -->
    <div class="fixed inset-0 bg-[url('data:image/svg+xml,%3Csvg viewBox=&quot;0 0 200 200&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot;%3E%3Cfilter id=&quot;noise&quot;%3E%3CfeTurbulence type=&quot;fractalNoise&quot; baseFrequency=&quot;0.65&quot; numOctaves=&quot;3&quot; stitchTiles=&quot;stitch&quot;/%3E%3C/filter%3E%3Crect width=&quot;100%25&quot; height=&quot;100%25&quot; filter=&quot;url(%23noise)&quot; opacity=&quot;0.03&quot;/%3E%3C/svg%3E')] opacity-20" aria-hidden="true"></div>
    
    <!-- Content wrapper with flexbox for sticky footer -->
    <div class="relative z-10 min-h-screen flex flex-col">
      <!-- Header -->
      <div class="sticky top-0 z-50 backdrop-blur-2xl bg-black/20 border-b border-white/10 shadow-2xl">
        <div class="mx-auto w-full max-w-7xl px-4 py-2 sm:px-6 sm:py-3 lg:px-8">
          <Header />
        </div>
      </div>
      
      <!-- Main content - flex-grow to push footer down -->
      <main class="relative flex-grow">
        <div class="mx-auto w-full max-w-7xl px-4 py-4 sm:px-6 lg:px-8">
          <slot />
        </div>
      </main>

      <!-- Footer - will stay at bottom when content is minimal -->
      <Footer />
    </div>
    
    <ThemeProvider />
    
    <style is:global>
      html {
        font-family: 'Inter', system-ui, sans-serif;
        scroll-behavior: smooth;
      }
      
      /* Gradient animation */
      @keyframes gradient {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }
      
      .animate-gradient {
        background-size: 400% 400%;
        animation: gradient 25s ease infinite;
      }

      /* Respect reduced motion in layout-specific animations */
      @media (prefers-reduced-motion: reduce) {
        .animate-gradient {
          animation: none !important;
        }
      }
      
      /* Improved focus styles */
      *:focus-visible {
        outline: 2px solid #3b82f6;
        outline-offset: 2px;
        border-radius: 4px;
      }
      
      /* Better text rendering */
      body {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        text-rendering: optimizeLegibility;
      }
      
      /* Prevent text selection on buttons and interactive elements */
      button, a, [role="button"] {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
      }
      
      /* Custom scrollbar */
      ::-webkit-scrollbar {
        width: 8px;
      }
      
      ::-webkit-scrollbar-track {
        background: rgba(0, 0, 0, 0.3);
        border-radius: 10px;
      }
      
      ::-webkit-scrollbar-thumb {
        background: linear-gradient(180deg, #3b82f6, #8b5cf6);
        border-radius: 10px;
      }
      
      ::-webkit-scrollbar-thumb:hover {
        background: linear-gradient(180deg, #2563eb, #7c3aed);
      }
    </style>
  </body>
</html>
